# Разъём A1200 #

## Полезные ссылки ##

* [Большой архив с документацией и поиском (в том числе с Amiga Developer CD)](http://amigadev.elowar.com/)
* [Полезная информация про autoconfig](http://amigadev.elowar.com/read/ADCD_2.1/AmigaMail_Vol2_guide/node0163.html)
* [Смотрелка топологии печатной платы](http://amigapcb.org/)
* [Спецификация на A1200](ext_docs/A1200_funcspec.txt)
* [Схема материнской платы R1](ext_docs/a1200_r1.pdf)
* [Схема материнской платы R2](ext_docs/a1200_r2.pdf)
* [Спецификация на Gayle](ext_docs/gayle_specification.pdf)
* [Даташит на 68(ec)020](ext_docs/mc68020um.pdf)



## Распиновка разъема ##

| Номер пина| Название пина             | Заметки                                                                                                                                                                                                                                                |
| -------------------| ------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1                  | Reserved                              | Тут должны быть адресные линии 31:24, но не срослось                                                                                                                                                                                                |
| 2                  | Reserved                              |                                                                                                                                                                                                                                                             |
| 3                  | Reserved                              |                                                                                                                                                                                                                                                             |
| 4                  | Reserved                              |                                                                                                                                                                                                                                                             |
| 5                  | Reserved                              |                                                                                                                                                                                                                                                             |
| 6                  | Reserved                              |                                                                                                                                                                                                                                                             |
| 7                  | Reserved                              |                                                                                                                                                                                                                                                             |
| 8                  | Reserved                              |                                                                                                                                                                                                                                                             |
| 9                  | GND                                   |                                                                                                                                                                                                                                                             |
| 10                 | +5VDC                                 |                                                                                                                                                                                                                                                             |
| 11                 | A23                                   | Адресные линии                                                                                                                                                                                                    |
| 12                 | A22                                   |                                                                                                                                                                                                                                                             |
| 13                 | A21                                   |                                                                                                                                                                                                                                                             |
| 14                 | A20                                   |                                                                                                                                                                                                                                                             |
| 15                 | A19                                   |                                                                                                                                                                                                                                                             |
| 16                 | A18                                   |                                                                                                                                                                                                                                                             |
| 17                 | A17                                   |                                                                                                                                                                                                                                                             |
| 18                 | A16                                   |                                                                                                                                                                                                                                                             |
| 19                 | GND                                   |                                                                                                                                                                                                                                                             |
| 20                 | +5VDC                                 |                                                                                                                                                                                                                                                             |
| 21                 | A15                                   |                                                                                                                                                                                                                                                             |
| 22                 | A14                                   |                                                                                                                                                                                                                                                             |
| 23                 | A13                                   |                                                                                                                                                                                                                                                             |
| 24                 | A12                                   |                                                                                                                                                                                                                                                             |
| 25                 | A11                                   |                                                                                                                                                                                                                                                             |
| 26                 | A10                                   |                                                                                                                                                                                                                                                             |
| 27                 | A9                                    |                                                                                                                                                                                                                                                             |
| 28                 | A8                                    |                                                                                                                                                                                                                                                             |
| 29                 | GND                                   |                                                                                                                                                                                                                                                             |
| 30                 | +5VDC                                 |                                                                                                                                                                                                                                                             |
| 31                 | A7                                    |                                                                                                                                                                                                                                                             |
| 32                 | A6                                    |                                                                                                                                                                                                                                                             |
| 33                 | A5                                    |                                                                                                                                                                                                                                                             |
| 34                 | A4                                    |                                                                                                                                                                                                                                                             |
| 35                 | A3                                    |                                                                                                                                                                                                                                                             |
| 36                 | A2                                    |                                                                                                                                                                                                                                                             |
| 37                 | A1                                    |                                                                                                                                                                                                                                                             |
| 38                 | A0                                    |                                                                                                                                                                                                                                                             |
| 39                 | GND                                   |                                                                                                                                                                                                                                                             |
| 40                 | +5VDC                                 |                                                                                                                                                                                                                                                             |
| 41                 | D31                                   | Двунаправленная шина данных                                                                                                                                                                                                          |
| 42                 | D30                                   |                                                                                                                                                                                                                                                             |
| 43                 | D29                                   |                                                                                                                                                                                                                                                             |
| 44                 | D28                                   |                                                                                                                                                                                                                                                             |
| 45                 | D27                                   |                                                                                                                                                                                                                                                             |
| 46                 | D26                                   |                                                                                                                                                                                                                                                             |
| 47                 | D25                                   |                                                                                                                                                                                                                                                             |
| 48                 | D24                                   |                                                                                                                                                                                                                                                             |
| 49                 | GND                                   |                                                                                                                                                                                                                                                             |
| 50                 | +5VDC                                 |                                                                                                                                                                                                                                                             |
| --                 | Разделитель разъёма |                                                                                                                                                                                                                                                               |
| 51                 | D23                                   |                                                                                                                                                                                                                                                             |
| 52                 | D22                                   |                                                                                                                                                                                                                                                             |
| 53                 | D21                                   |                                                                                                                                                                                                                                                             |
| 54                 | D20                                   |                                                                                                                                                                                                                                                             |
| 55                 | D19                                   |                                                                                                                                                                                                                                                             |
| 56                 | D18                                   |                                                                                                                                                                                                                                                             |
| 57                 | D17                                   |                                                                                                                                                                                                                                                             |
| 58                 | D16                                   |                                                                                                                                                                                                                                                             |
| 59                 | GND                                   |                                                                                                                                                                                                                                                             |
| 60                 | +5VDC                                 |                                                                                                                                                                                                                                                             |
| 61                 | D15                                   |                                                                                                                                                                                                                                                            |
| 62                 | D14                                   |                                                                                                                                                                                                                                                             |
| 63                 | D13                                   |                                                                                                                                                                                                                                                             |
| 64                 | D12                                   |                                                                                                                                                                                                                                                             |
| 65                 | D11                                   |                                                                                                                                                                                                                                                             |
| 66                 | D10                                   |                                                                                                                                                                                                                                                             |
| 67                 | D9                                    |                                                                                                                                                                                                                                                             |
| 68                 | D8                                    |                                                                                                                                                                                                                                                             |
| 69                 | GND                                   |                                                                                                                                                                                                                                                             |
| 70                 | +5VDC                                 |                                                                                                                                                                                                                                                             |
| 71                 | D7                                    |                                                                                                                                                                                                                                                             |
| 72                 | D6                                    |                                                                                                                                                                                                                                                             |
| 73                 | D5                                    |                                                                                                                                                                                                                                                             |
| 74                 | D4                                    |                                                                                                                                                                                                                                                             |
| 75                 | D3                                    |                                                                                                                                                                                                                                                             |
| 76                 | D2                                    |                                                                                                                                                                                                                                                             |
| 77                 | D1                                    |                                                                                                                                                                                                                                                             |
| 78                 | D0                                    |                                                                                                                                                                                                                                                             |
| 79                 | GND                                   |                                                                                                                                                                                                                                                             |
| 80                 | +5VDC                                 |                                                                                                                                                                                                                                                             |
| 81                 | /IPL2                                 |                                                                                                                                                                                                                      |
| 82                 | /IPL1                                 |                                                                                                                                                                                                                      |
| 83                 | /IPL0                                 |                                                                                                                                                                                                                  |
| 84                 | Reserved NC                           | Тут изначально предполагалась линия _IPEND                                                                                                                                                                                    |
| 85                 | /RST                                  |                                                                                                                                                                                                                    |
| 86                 | /HLT                                  |                                                                                                                                                                                                                                                               |
| 87                 | Reserved NC                           | Тут изначально предполагалась линия _ECS                                                                                                                                                                                      |
| 88                 | Reserved NC                           | Тут изначально предполагалась линия _OCS                                                                                                                                                                                      |
| 89                 | SIZE1                                 |                                                                                                                                                                                                                  |
| 90                 | SIZE0                                 |                                                                                                                                                                                                                   |
| 91                 | /AS                                   |                                                                                                                                                                                                                  |
| 92                 | /DS                                   |                                                                                                                                                                                                                      |
| 93                 | R/W                                   |                                                                                                                                                                                                    |
| 94                 | /BERR                                 |                                                                                                                                                                                                                    |
| 95                 | Reserved                              |                                                                                                                                                                                                                                                               |
| 96                 | /AVEC                                 |                                                                                                                                                                                                                                                               |
| 97                 | /DSACK1                               |                                                                                                                                                            |
| 98                 | /DSACK0                               |                                                                                                                                                                |
| 99                 | CPUCLKA                               |                                                                                                                                                                                                                  |
| 100                | E CLOCK                               |                                                               |
| 101                | GND                                   |                                                                                                                                                                                                                                                               |
| 102                | +5VDC                                 |                                                                                                                                                                                                                                                               |
| 103                | FC2                                   |                                                                                                                                                                                                                  |
| 104                | FC1                                   |                                                                                                                                                                                                                     |
| 105                | FC0                                   |                                                                                                                                                                                                                |
| 106                | /RMC                                  |                                                                                                                                                                                                                                                               |
| 107                | Reserved NC                           | Тут изначально предполагалась линия _CIIN                                                                                                                                                                                     |
| 108                | Reserved NC                           | Тут изначально предполагалась линия _CIOUT                                                                                                                                                                                    |
| 109                | Reserved NC                           | Тут изначально предполагалась линия _CBREQ                                                                                                                                                                                    |
| 110                | Reserved NC                           | Тут изначально предполагалась линия _CBACK                                                                                                                                                                                    |
| 111                | /BR                                   | Соединен с /BOSS                                                                                                                                                                                                           |
| 112                | /BG                                   |                                                                                                                                                                                                                                                               |
| 113                | Reserved NC                           | Тут изначально предполагалась линия _BGACK                                                                                                                                                                                    |
| 114                | /BOSS                                 | Соединен с /BR                                                                                                                                                                                                             |
| 115                | /FPUCS                                |                                                                                                                                                                                                                                                               |
| 116                | FPUSENSE                              |                                                                                                                                                                                                                                                               |
| 117                | CCKA                                  |                                                                                                                                                                                                                                                               |
| 118                | /RESET                                |                                                                                                                                                                                                                                                               |
| 119                | GND                                   |                                                                                                                                                                                                                                                               |
| 120                | +5VDC                                 |                                                                                                                                                                                                                                                               |
| 121                | /NETCS                                |                                                                                                                                                                                                                                                               |
| 122                | /SPARECS                              |                                                                                                                                                                                                                                                               |
| 123                | /RTCCS                                |                                                                                                                                                                                                                    |
| 124                | /FLASH                                |                                                                                                                                                                                                                                                               |
| 125                | /REG                                  |                                                                                                                                                                                                                                                               |
| 126                | CCENA                                 |                                                                                                                                                                                                                                                               |
| 127                | /WAIT                                 |                                                                                                                                                                                                                                                               |
| 128                | /KBRESET                              |  |
| 129                | /IORD                                 |                                                                                                                                                                                                                      |
| 130                | /IOWR                                 |                                                                                                                                                                                                                 |
| 131                | /OE                                   |                                                                                                                                                                                                                                                               |
| 132                | /WE                                   |                                                                                                                                                                                                                                                               |
| 133                | /OVR                                  |                                                                                                                                                                                                                                                               |
| 134                | XRDY                                  |                                                                                                                                                                                                                                                               |
| 135                | /ZORRO                                |                                                                                                                                                                                                                                                               |
| 136                | /WIDE                                 |                                                                                                                                                                                                                                                               |
| 137                | /INT2                                 |                                                                                                                                                                                                                  |
| 138                | /INT6                                 |                                                                                                                                                                                                                                                               |
| 139                | GND                                   |                                                                                                                                                                                                                                                               |
| 140                | +5VDC                                 |                                                                                                                                                                                                                                                               |
| 141                | SYSTEM1 (GND)                         | Всегда посажен на землю                                                                                                                                                                                                                   |
| 142                | SYSTEM2 (GND)                         | Всегда посажен на землю                                                                                                                                                                                                                   |
| 143                | /xRxD                                 |                                                                                                                                                                                                                                                               |
| 144                | /xTxD                                 |                                                                                                                                                                                                                                                               |
| 145                | /CONFIG OUT                           | Всегда посажен на землю                                                                                                                                                                                                                   |
| 146                | AUDIO GND                             |                                                                                                                                                                                                                                                               |
| 147                | AUDIO LEFT                            |                                                                                                                                                                                                                                                               |
| 148                | AUDIO RIGHT                           |                                                                                                                                                                                                                                                               |
| 149                | +12VDC                                |                                                                                                                                                                                                                                                               |
| 150                | -12VDC                                |                                                                                                                                                                                                                                                               |


## Группы сигналов, их описание ##

Огромное количество полезной дополнительной информации можно найти в [спецификации на A1200](ext_docs/A1200_funcspec.txt)

### 68EC020 processor signals ###


| Сигнал| Описание                            | Направление (отн. процессора \ акселя) | Заметки                                                                                                                                                                                                        |
| ------------| ------------------------------------------- | -------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| A(23:0)     | address bus                        | out                                                                  |                                                                                                                                                                                                                       |
| _AS         | address strobe                              | out                                                                  |                                                                                                                                                                                                                       |
| _AVEC       | auto vector                        | in (nc)                                                              | На материнке никуда кроме проца и подтяжки к VCC не идёт |
| _BEER       | bus error                                   | in                                                                   |                                                                                                                                                                                                                       |
| _BG         | bus grant                                   | out (nc)                                                             | Просто выведен с набортного процессора на разъём                                                                             |
| _BR         | bus request (may be tied to _BOSS)          | in (nc)                                                              | Вместе с _BOSS выбирают действующий процессор (набортный или аксель)                                                                                                |
| _CPUCLK_A   | processor clock (14 MHz in A1200)           | in                                                                   |                                                                                                                                                                                                                       |
| D(31:0)     | data bus                                    | i\o                                                                  | Двунаправленная шина данных, направление в зависимости от типа транзакции                                                                             |
| _DS         | data strobe                                 | out                                                                  |                                                                                                                                                                                                                       |
| _DSACK (1:0)| data strobe acknowledge                     | in                                                                   |                                                                                                                                                                                                                       |
| FC(2:0)     | function codes (only 1:0 decoded)  | out                                                                  |                                                                                                                                                                                                                       |
| _HLT        | halt request                                | i\o OC                                                               | <ul><li>Со стороны gayle: The  _KBRESET  input  drives  the  open  collector  outputs  RESET  an -HALT  low</li> <li>Со стороны 68020: The assertion of this bidirectional open-drain signal indicates that the processor should suspend bus activity or, when used with BERR, that the processor should retry the current cycle. When the processor has stopped executing instructions due to a double bus fault condition, the HALT line is asserted by the processor to indicate to external devices that the processor has stopped. </li></ul>|
| _IPL(2:0)| interrupt priority        | in       |                                                                                                                     |
| _RMC     | read/modify cycle (not implemented) | out (nc) | Просто выведен с набортного процессора на разъём |
| _RST     | reset (processor bus)               | i\o OC   | Процессорный ресет, который заодно и сбрасывает всю оставшуюся машину. Open collector, можно дергать и устраивать ресеты  <ul><li>The _KBRESET input drives the open collector outputs RESET an -HALT low</li><li>This bidirectional open-drain signal is used to initiate a system reset. An external reset signal resets the MC68020/EC020 as well as all external devices. A reset signal from the processor (asserted as part of the RESET instruction) resets external devices only; the internal state of the processor is not altered. </li></ul>|
| R_W       | read/write    | out |  |
| SIZE (1:0)| transfer size | out |  |


### amiga system specific signals ###


| Сигнал| Описание                        | Направление (отн. акселя) | Заметки                                                                                                                                                                                                                       |
| ------------| --------------------------------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| _BOSS       | main CPU disable (tied to _BG in A1200) | out OC                                        | Отключает 68020, предоставляет акселератору полный доступ к шине |
| CCK_A       | amiga color clock (3.58MHz)             | in                                            | В данном контексте интересен тем, что это клок paula. "Fast processors need to reclock the IPL lines with CCK to prevent skew from causing false interrupt level coding."                      |
| _CC_ENA     | credit card enable             | in                                            | Линия связана c декодированием  gaule адресов PCMCIA <ul><li>These cycles are active during accesses of address $4000’00 to $8FFFFF while a credit card is inserted.</li><li>Accesses from $400000 to $7FFFFF are to the credit card main memory.</li><li>Accesses from $8000000 to $8FFFFF are to credit card attribute memory.</li><li>Both types of cycles are identical,  except credit card attribute cycles assert _REG and _CC_ENA, while  main memory cycles  just assert _CC_ENA.</li><li>This represents 4 MB of directly accessible main memory address space</li></ul>|
| E      | phi-2 clock for 8520's                                   | in | Выглядит как рудимент поддержки шины 6800, поправьте, если это не так. |
| _CFGOUT| auto-config chain origin                                 | -- | Всегда посажен на землю                                              |
| _FLASH | FO-F7 (flash) address decode (use with _OE/_WE) | in | Потенциально интересный сигнал: <ul><li>Memory at this decode is searched by the software for a diagnostic (early boot takeover) flag/vector and for «ROM-tags».</li><li>Placing ROM, RAM or FLASH memory at this decode provides potential for application specific ROM's, soft-loading OS modules and other debugging aids.</li><li>Since _WIDE is broken in the A1200, default termination for this space is 16-bit, asserting _OVR disables the decode, so 32-bit memory would have to do its own decode.</li><li>Но кажется, что значительно проще будет декодировать адреса локально на карте для подключения bootrom, вместо того, чтобы использовать этот сигнал. Тем более, что на том же B1260 явно так и делают.</li></ul>|
| _INT2    | priority 2 interrupt request | out OC | Высокоприоритетное прерывание, только на выход, далее вся обработка (вектор прерывания и поиск устройства-затейника) софтварно |
| _INT6    | priority 6 interrupt request | out OC | Низкоприоритетное прерывание, только на выход, далее вся обработка (вектор прерывания и поиск устройства-затейника) софтварно   |
| _lORD    | I/O read strobe     | in     | Сигналы с клокпорта из gayle, также используются в ide                                          |
| _IOWR    | I/O write strobe    | in     | Сигналы с клокпорта из gayle, также используются в ide                                          |
| _KB_RESET| keyboard reset       | in     |<ul><li>По идее, это ресет, который генерится контроллером клавиатуры после аккорда ctrl+LA+RA</li><li>В funcspec вероятно перепутан с _XKB_RESET, которого нет на плате (смотри схему)</li></ul>|
| LEFT   | left audio channel                              | analog out | Левый канал аудио, миксуется со звуком paula через резистивный сумматор (у аудио своя земля, если что)       |
| _NET_CS| D9 (network) chip select (use with _IORD/_IOWR) | in         | очередной CS из gayle, кажется, на уровне софта не реализовано в ОС (пруфы?)                                                           |
| _OE    | memory read strobe                              | in         | генерируются gayle, идут к PCMCIA и возможно косвенно (не разбирал какая логика у GAL внизу-слева на материнке) на Kickstart |
| _OVR   | Gayle decode override                          | out OC     |<ul><li>[Информация тут, страница 11](ext_docs/gayle_specification.pdf)</li><li>_OVR tn-states the _DSACK lines so that the device may assert its own DSACKS. _OVR must be decoded prior to the assertion of address strobe and is latched for the duration of the cycle. </li><li>Используется при подключении простого расширения памяти (slave).</li><li>Use of these signals is only supported in the «Zorro/Auto-config space» (20-5F, E8-EF, C0-CF)</li></ul>|
| _REG     | credit card register space                   | in         | смотри _CC_ENA                                                |
| _RESET   | buffered reset signal                                 | in         | Буферизованный _RST, идущий на клокпорт и ide        |
| RIGHT    | right audio channel                          | analog out | Правый канал аудио, миксуется со звуком paula через резистивный сумматор (у аудио своя земля, если что) |
| _RTC_CS  | DC (RTC) chip select (use with _IORD/_IOWR)  | in         | CS c клокпорта из gayle                                                                                                                                                     |
| _SPARE_CS| D8 (UART) chip select (use with _IORD/_IOWR) | in         | CS c клокпорта из gayle                                                                                                                                                     |
| SYSTEM_0 | System type code                             | --         | Всегда посажен на землю                                                                                                                                            |
| SYSTEM_1 | ""                                                    | --         | Всегда посажен на землю                                                                                                                                            |
| _WAIT    | wait Dinput for _IORD/_IOWR/_OE/_WE          | out OC     |<ul><li>добавляет waitstate'ы к периферийным транзакциям через gayle</li><li>подключен к ide и pcmcia </li></ul>|
| _WE  | memory write strobe                  | in       | генерируются gayle, идут к PCMCIA и возможно на Kickstart |
| -----| --------------------------------------------- | -------- | ------------------------------------------------------------------------------------- |
| _WIDE| 32-bit termination (broken in A1200) | --       | Cломано на 1200                                             |
| XRDY | wait request                         | out (??) |Не нашёл объяснения целевого предназначения этого сигнала, но вот что пишут:<ul><li>XRDY holds of the assertion of _DSACK but does not tn-state the DSACK lines</li><li>If XRDY is asserted in time, generation of _DTACK is held off until XRDY is negated.</li><li>Use of these signals is only supported in the «Zorro/Auto-config space» (20-5F, E8-EF, C0-CF)</li><li>Other address ranges ignore the XRDY signal.</li></ul>|
| _ZORRO| 7MHz bus master (not supported in A1200) | --  | Cломано на 1200                    |
| _xRxD | receive data from serial connector       | out | Rx, c serial port машины |
| _xTxD | transmit data or'ed to serial connector  | out | Tx, идёт на serial port машины через AND |


### signals not implemented on A1200/68EC020 ###


| Сигнал| Описание                  |
| ------------| --------------------------------- |
| A(31:24)    | processor address lines |
| _BGACK      | bus grant acknowledge             |
| _CBACK      | cache burst acknowledge           |
| _CBREQ      | cache burst request               |
| _CIIN       | cache inhibit in                  |
| _ClOUT      | cache inhibit out                 |
| _ECS        | early cycle start                 |
| _IPEND      | interrupt pending                 |
| _OCS        | operand cycle start               |
| _STERM      | synchronous termination           |

### math coprocessor signals ###


| _FPU_CS   | floating point chip select |
| ----------| ------------------------------------ |
| _FPU_SENSE| floating point chip detect |

### Power and Ground ###


| Сигнал   | Описание             |
| ---------------| ---------------------------- |
| +5v (11 pins)  | logic +5 volts @250 MA  |
| GROUND(11 pins)| logic ground                 |
| +12v (1 pin)   | +12 volts @25 MA        |
| -12v (1 pin)   | -12 volts @25 MA      |
| AUDIO (1 pin)  | audio ground                 |
